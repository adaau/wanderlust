app.controller('PlaceCtrl', ['$scope', '$auth', '$stateParams', 'PlaceFactory', '$state', '$http', function($scope, $auth, $stateParams, PlaceFactory, $state, $http){
  console.log('PlaceCtrl')
  $scope.places = [];

  var url = "<%= ENV['URL'] %>" || "http://localhost:3000";

  if ($state.current.name == "places") { // INDEX
    $scope.places = PlaceFactory.query();
  } else { // SHOW
    $scope.place = PlaceFactory.get({id: $stateParams.id});
  }

  function getRandomPlaces() {
    $http
      .get(url + '/api/places/random')
      .then(function(response){
        console.log(response)
        $scope.randoms = response.data
      })
  };

  getRandomPlaces();

  $scope.addPoints = function () {
        var seriesArray = $scope.highchartsNG.series
        var rndIdx = Math.floor(Math.random() * seriesArray.length);
        seriesArray[rndIdx].data = seriesArray[rndIdx].data.concat([1, 10, 20])
    };

    $scope.addSeries = function () {
        var rnd = []
        for (var i = 0; i < 10; i++) {
            rnd.push(Math.floor(Math.random() * 20) + 1)
        }
        $scope.highchartsNG.series.push({
            data: rnd
        })
    }

    $scope.removeRandomSeries = function () {
        var seriesArray = $scope.highchartsNG.series
        var rndIdx = Math.floor(Math.random() * seriesArray.length);
        seriesArray.splice(rndIdx, 1)
    }

    $scope.options = {
        type: 'line'
    }

    $scope.swapChartType = function () {
        if (this.highchartsNG.options.chart.type === 'line') {
            this.highchartsNG.options.chart.type = 'bar'
        } else {
            this.highchartsNG.options.chart.type = 'line'
        }
    }

    $scope.highchartsNG = {
        options: {
            chart: {
                type: 'bar'
            }
        },
        series: [{
            data: [10, 15, 12, 8, 7]
        }],
        title: {
            text: 'Hello'
        },
        loading: false
    }


  // $scope.chartConfig = {
  //   options: {
  //     chart: {
  //       type: 'bar'
  //     }
  //   },
  //   series: [{
  //     data: [10, 15, 12, 8, 7]
  //   }],
  //   title: {
  //     text: 'Hello'
  //   },

  //   loading: false
  // }
}])
